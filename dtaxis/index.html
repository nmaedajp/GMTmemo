<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/GMTmemo/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/GMTmemo/css/franklin.css"> <link rel=stylesheet  href="/GMTmemo/css/pure.css"> <link rel=stylesheet  href="/GMTmemo/css/side-menu.css"> <style> .franklin-content{padding-left:10%;} @media (min-width: 940px) { .franklin-content {width: 640px; margin-left: 0px; padding-left: 80px;} .header {width: 700px;} } </style> <link rel=icon  href="/GMTmemo/assets/favicon.png"> <title>日付型の軸</title> <div id=layout > <a href="#menu" id=menuLink  class=menu-link ><span></span></a> <div id=menu > <div class=pure-menu > <a class=pure-menu-heading  href="#">GMT</a> <ul class=pure-menu-list > <li class="pure-menu-item "><a href="/GMTmemo/" class=pure-menu-link >Home</a> <li class="pure-menu-item "><a href="/GMTmemo/menu1/" class=pure-menu-link >散布図</a> <li class="pure-menu-item "><a href="/GMTmemo/menu2/" class=pure-menu-link >軸</a> <li class="pure-menu-item pure-menu-selected"><a href="/GMTmemo/dtaxis" class=pure-menu-link >日付型の軸</a> <li class="pure-menu-item "><a href="/GMTmemo/griddata/" class=pure-menu-link >グリッドデータ</a> <li class="pure-menu-item "><a href="/GMTmemo/menu3/" class=pure-menu-link >Tags</a> </ul> </div> </div> <div id=main > <div class=header > <h1>日付型の軸</h1> <h2>GMT.jl 使用メモ</h2> </div> <div class=franklin-content > <h1 id="日付型の軸"><a href="#日付型の軸" class=header-anchor >日付型の軸</a></h1> <div class=franklin-toc ><ol><li><a href="#日付型の軸">日付型の軸</a><ol><li><a href="#自動で軸を描く">自動で軸を描く</a><li><a href="#第軸を使う">第２軸を使う</a></ol></ol></div> <p>日付型の軸については，GMT.jlのドキュメント<a href="https://www.generic-mapping-tools.org/GMTjl_doc/examples/frames/frames/#cartesian_time_axes/">Cartesian time axes</a> あたりが参考となる．</p> <h2 id="自動で軸を描く"><a href="#自動で軸を描く" class=header-anchor >自動で軸を描く</a></h2> <p>日付型の軸を自動でいくつか描いてみる．</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Dates
<span class=hljs-keyword >using</span> GMT

nw = now()

<span class=hljs-comment ># -1時間，+49時間</span>
x1h = nw - Hour(<span class=hljs-number >1</span>); x2h = nw + Hour(<span class=hljs-number >49</span>)
flout = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;d_axis_h&quot;</span>)
gmtbegin(flout, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(x1h, x2h, <span class=hljs-number >0</span>, <span class=hljs-number >1</span>), J=<span class=hljs-string >&quot;X9c/3c&quot;</span>, 
        B=<span class=hljs-string >&quot;afg WSne&quot;</span>, 
        ylabel=<span class=hljs-string >&quot;y&quot;</span>)
gmtend()

<span class=hljs-comment ># -1日，+60日</span>
x1d = nw - Day(<span class=hljs-number >1</span>); x2d = nw + Day(<span class=hljs-number >60</span>)
flout = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;d_axis_d&quot;</span>)
gmtbegin(flout, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(x1d, x2d, <span class=hljs-number >0</span>, <span class=hljs-number >1</span>), J=<span class=hljs-string >&quot;X9c/3c&quot;</span>, 
        B=<span class=hljs-string >&quot;afg WSne&quot;</span>, 
        ylabel=<span class=hljs-string >&quot;y&quot;</span>)
gmtend()

<span class=hljs-comment ># -1月，+36月</span>
x1m = nw - Month(<span class=hljs-number >1</span>); x2m = nw + Month(<span class=hljs-number >36</span>)
flout = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;d_axis_m&quot;</span>)
gmtbegin(flout, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(x1m, x2m, <span class=hljs-number >0</span>, <span class=hljs-number >1</span>), J=<span class=hljs-string >&quot;X9c/3c&quot;</span>, 
        B=<span class=hljs-string >&quot;afg WSne&quot;</span>, 
        ylabel=<span class=hljs-string >&quot;y&quot;</span>)
gmtend()</code></pre> <ul> <li><p>-1時間，&#43;49時間</p> </ul> <img src="/GMTmemo/assets/dtaxis/output/d_axis_h.png" alt=""> <ul> <li><p>-1日，&#43;60日</p> </ul> <img src="/GMTmemo/assets/dtaxis/output/d_axis_d.png" alt=""> <ul> <li><p>-1月，&#43;36月</p> </ul> <img src="/GMTmemo/assets/dtaxis/output/d_axis_m.png" alt=""> <p>これらの出力をみると，字が重なっているところ， ひとつ上のカテゴリー（時刻だけではなく日も追加，何年何月を入れたい，年月を入れたい） など，もう少し整えたい気持ちになってくる．</p> <h2 id="第軸を使う"><a href="#第軸を使う" class=header-anchor >第２軸を使う</a></h2> <p>こんなときには，第２軸を使って，軸の表記を整える．</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Dates
<span class=hljs-keyword >using</span> GMT

nw = now()

<span class=hljs-comment ># -1時間，+49時間</span>
x1h = nw - Hour(<span class=hljs-number >1</span>); x2h = nw + Hour(<span class=hljs-number >49</span>)
flout = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;d_axis_h2&quot;</span>)
gmtbegin(flout, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(x1h, x2h, <span class=hljs-number >0</span>, <span class=hljs-number >1</span>), J=<span class=hljs-string >&quot;X9c/3c&quot;</span>, 
        xaxis=(annot=<span class=hljs-number >6</span>, annot_unit=:hour, ticks=<span class=hljs-number >3</span>, ticks_unit=:hour, 
               grid=:auto),
        xaxis2=(annot=<span class=hljs-number >1</span>, annot_unit=:date, ticks=<span class=hljs-number >1</span>, ticks_unit=:date),
        yaxis=(annot=:auto, ticks=:auto, grid=:auto),
        ylabel=<span class=hljs-string >&quot;y&quot;</span>,
        par=(FORMAT_TIME_SECONDARY_MAP=<span class=hljs-string >&quot;abbreviated&quot;</span>, 
             FORMAT_DATE_MAP=<span class=hljs-string >&quot;\&quot;o dd\&quot;&quot;</span>, FORMAT_CLOCK_MAP=<span class=hljs-string >&quot;hh&quot;</span>, 
             FONT_ANNOT_PRIMARY=<span class=hljs-number >9</span>)
        )
gmtend()

<span class=hljs-comment ># -1日，+60日</span>
x1d = nw - Day(<span class=hljs-number >1</span>); x2d = nw + Day(<span class=hljs-number >60</span>)
flout = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;d_axis_d2&quot;</span>)
gmtbegin(flout, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(x1d, x2d, <span class=hljs-number >0</span>, <span class=hljs-number >1</span>), J=<span class=hljs-string >&quot;X9c/3c&quot;</span>, 
        xaxis=(annot=<span class=hljs-number >7</span>, annot_unit=:day_week, 
               ticks=<span class=hljs-number >1</span>, ticks_unit=:day_date),
        xaxis2=(annot=<span class=hljs-number >1</span>, annot_unit=:month, ticks=<span class=hljs-number >1</span>, ticks_unit=:month),
        yaxis=(annot=:auto, ticks=:auto, grid=:auto),
        ylabel=<span class=hljs-string >&quot;y&quot;</span>, 
        conf=(FORMAT_TIME_SECONDARY_MAP=<span class=hljs-string >&quot;abbreviated&quot;</span>, 
              FORMAT_DATE_MAP=<span class=hljs-string >&quot;\&quot;o yyyy\&quot;&quot;</span>, 
              FONT_ANNOT_PRIMARY=<span class=hljs-string >&quot;7p&quot;</span>, FONT_ANNOT_SECONDARY=<span class=hljs-string >&quot;8p&quot;</span>),
        )
gmtend()

<span class=hljs-comment ># -1月，+36月</span>
x1m = nw - Month(<span class=hljs-number >1</span>); x2m = nw + Month(<span class=hljs-number >36</span>)
flout = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;d_axis_m2&quot;</span>)
gmtbegin(flout, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(x1m, x2m, <span class=hljs-number >0</span>, <span class=hljs-number >1</span>), J=<span class=hljs-string >&quot;X9c/3c&quot;</span>, 
        xaxis=(annot=<span class=hljs-number >1</span>, annot_unit=:month, ticks=<span class=hljs-number >1</span>, ticks_unit=:month, 
               grid=:auto),
        xaxis2=(annot=<span class=hljs-number >1</span>, annot_unit=:year, ticks=<span class=hljs-number >1</span>, ticks_unit=:year),
        yaxis=(annot=:auto, ticks=:auto, grid=:auto),
        ylabel=<span class=hljs-string >&quot;y&quot;</span>, 
        conf=(FORMAT_TIME_PRIMARY_MAP=<span class=hljs-string >&quot;character&quot;</span>, FORMAT_DATE_MAP=<span class=hljs-string >&quot;\&quot;o\&quot;&quot;</span>, 
              FONT_ANNOT_PRIMARY=<span class=hljs-string >&quot;8p&quot;</span>), 
        )
gmtend()</code></pre> <ul> <li><p>-1時間，&#43;49時間</p> </ul> <img src="/GMTmemo/assets/dtaxis/output/d_axis_h2.png" alt=""> <p> 時刻を６時間毎＋日付</p> <ul> <li><p>-1日，&#43;60日</p> </ul> <img src="/GMTmemo/assets/dtaxis/output/d_axis_d2.png" alt=""> <p> 週の月曜日の日が入っている． 縦のグリッド線は入れていない．</p> <ul> <li><p>-1月，&#43;36月</p> </ul> <img src="/GMTmemo/assets/dtaxis/output/d_axis_m2.png" alt=""> <p> 月の１文字と年</p> <p>文字の重なりなどは，作図してみないとわからないこともあるので， 結局のところはトライアル・アンド・エラーになる．</p> <div class=page-foot > <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Naoki Maeda. Last modified: February 19, 2025. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> <script src="/GMTmemo/libs/pure/ui.min.js"></script> <script src="/GMTmemo/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script>