<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/GMTmemo/libs/katex/katex.min.css"> <link rel=stylesheet  href="/GMTmemo/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/GMTmemo/css/franklin.css"> <link rel=stylesheet  href="/GMTmemo/css/pure.css"> <link rel=stylesheet  href="/GMTmemo/css/side-menu.css"> <style> .franklin-content{padding-left:10%;} @media (min-width: 940px) { .franklin-content {width: 640px; margin-left: 0px; padding-left: 80px;} .header {width: 700px;} } </style> <link rel=icon  href="/GMTmemo/assets/favicon.png"> <title>グリッドデータ</title> <div id=layout > <a href="#menu" id=menuLink  class=menu-link ><span></span></a> <div id=menu > <div class=pure-menu > <a class=pure-menu-heading  href="#">GMT</a> <ul class=pure-menu-list > <li class="pure-menu-item "><a href="/GMTmemo/" class=pure-menu-link >Home</a> <li class="pure-menu-item "><a href="/GMTmemo/menu1/" class=pure-menu-link >散布図</a> <li class="pure-menu-item "><a href="/GMTmemo/menu2/" class=pure-menu-link >軸</a> <li class="pure-menu-item "><a href="/GMTmemo/dtaxis" class=pure-menu-link >日付型の軸</a> <li class="pure-menu-item pure-menu-selected"><a href="/GMTmemo/griddata/" class=pure-menu-link >グリッドデータ</a> <li class="pure-menu-item "><a href="/GMTmemo/menu3/" class=pure-menu-link >Tags</a> </ul> </div> </div> <div id=main > <div class=header > <h1>グリッドデータ</h1> <h2>GMT.jl 使用メモ</h2> </div> <div class=franklin-content > <h1 id="グリッドデータ"><a href="#グリッドデータ" class=header-anchor >グリッドデータ</a></h1> <div class=franklin-toc ><ol><li><a href="#グリッドデータ">グリッドデータ</a><ol><li><a href="#関数からグリッドデータへ">関数からグリッドデータへ</a><li><a href="#xyz2grd_の_z_オプション"><code>xyz2grd</code> の <code>Z</code> オプション</a></ol></ol></div> <h2 id="関数からグリッドデータへ"><a href="#関数からグリッドデータへ" class=header-anchor >関数からグリッドデータへ</a></h2> <p><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy=false >(</mo><mi>x</mi><mo separator=true >,</mo><mi>y</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">f(x, y)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class=mopen >(</span><span class="mord mathnormal">x</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mclose >)</span></span></span></span> のような2次元の関数からグリッドデータを作る．</p> <ul> <li><p>関数 f からある範囲&#40;x1, x2, y1, y2&#41;のグリッドデータを作る．</p> <li><p>刻み幅は，dx，dy．</p> </ul> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> GMT
<span class=hljs-keyword >function</span> vset(f, x1, x2, dx, y1, y2, dy)
    nx = round(<span class=hljs-built_in >Int64</span>, (x2 - x1)/dx) + <span class=hljs-number >1</span>
    ny = round(<span class=hljs-built_in >Int64</span>, (y2 - y1)/dy) + <span class=hljs-number >1</span>
    zz = <span class=hljs-built_in >Array</span>{<span class=hljs-built_in >Float64</span>}(<span class=hljs-literal >undef</span>, nx*ny);
    <span class=hljs-keyword >for</span> ix = <span class=hljs-number >1</span>:nx
        x = (ix - <span class=hljs-number >1</span>) * dx + x1
        <span class=hljs-keyword >for</span> iy = <span class=hljs-number >1</span>:ny
            y = (iy - <span class=hljs-number >1</span>) * dy + y1
            ind = (ix-<span class=hljs-number >1</span>)*nx + iy
            zz[ind] = f(x, y)
        <span class=hljs-keyword >end</span>
    <span class=hljs-keyword >end</span>
    G = xyz2grd(zz, region=(x1, x2, y1, y2), Z=<span class=hljs-string >&quot;LB&quot;</span>, I=<span class=hljs-string >&quot;<span class=hljs-variable >$dx</span>/<span class=hljs-variable >$dy</span>&quot;</span>)
    <span class=hljs-keyword >return</span> G
<span class=hljs-keyword >end</span></code></pre> <ul> <li><p>関数として，<span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy=false >(</mo><mi>x</mi><mo separator=true >,</mo><mi>y</mi><mo stretchy=false >)</mo><mo>=</mo><mo>−</mo><mn>0.5</mn><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>+</mo><mn>12.5</mn></mrow><annotation encoding="application/x-tex">f(x,y) = -0.5x^2 + y^2 + 12.5</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class=mopen >(</span><span class="mord mathnormal">x</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mclose >)</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.8974em;vertical-align:-0.0833em;"></span><span class=mord >−</span><span class=mord >0.5</span><span class=mord ><span class="mord mathnormal">x</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:1.0085em;vertical-align:-0.1944em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:0.6444em;"></span><span class=mord >12.5</span></span></span></span> を定義</p> <li><p>グリッドデータを作って，色別の段彩図，等値線を作成する．</p> </ul> <pre><code class="julia hljs"><span class=hljs-keyword >function</span> kansu(x, y)
    z = −<span class=hljs-number >0.5</span>*x^<span class=hljs-number >2</span> + y^<span class=hljs-number >2</span> +<span class=hljs-number >12.5</span>
    <span class=hljs-keyword >return</span> z
<span class=hljs-keyword >end</span>

<span class=hljs-comment ># データの範囲と刻み幅</span>
x1 = -<span class=hljs-number >5.0</span>; x2 = <span class=hljs-number >5.0</span>; dx = <span class=hljs-number >0.1</span> 
y1 = -<span class=hljs-number >5.0</span>; y2 = <span class=hljs-number >5.0</span>; dy = <span class=hljs-number >0.1</span>

<span class=hljs-comment ># グリッドデータを作成する</span>
Gz = vset(kansu, x1, x2, dx, y1, y2, dy)

<span class=hljs-comment ># 段彩図，等値線の作成</span>
flout = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;kansu&quot;</span>)
gmtbegin(flout, fmt=<span class=hljs-string >&quot;png&quot;</span>)
    basemap(B=<span class=hljs-string >&quot;afg WSne&quot;</span>, region=(x1, x2, y1, y2), J=<span class=hljs-string >&quot;X8c/8c&quot;</span>, 
        xlabel=<span class=hljs-string >&quot;x&quot;</span>, ylabel=<span class=hljs-string >&quot;y&quot;</span>)
    grdimage(Gz, color=:rainbow, dpi=<span class=hljs-number >300</span>) 
    grdcontour(Gz, cont=<span class=hljs-number >2</span>, annot=(int=<span class=hljs-number >4</span>, labels=(font=<span class=hljs-number >8</span>,)), labels=(dist=<span class=hljs-number >4</span>,))
    colorbar(frame=(annot=:auto,))
gmtend()</code></pre> <img src="/GMTmemo/assets/griddata/output/kansu.png" alt=""> <h2 id="xyz2grd_の_z_オプション"><a href="#xyz2grd_の_z_オプション" class=header-anchor ><code>xyz2grd</code> の <code>Z</code> オプション</a></h2> <p><code>xyz2grd</code> の <code>Z</code> オプションは，配列のデータの並び順を指定している． </p> <table><tr><th align=center >オプションと順序<th align=center >オプションと順序<tr><td align=center >Z&#61;&quot;TL&quot;<img src="/GMTmemo/assets/grd/ztl.gif" alt="Z&#61;&quot;TL&quot;" /><td align=center >Z&#61;&quot;TR&quot;<img src="/GMTmemo/assets/grd/ztr.gif" alt="Z&#61;&quot;TR&quot;" /><tr><td align=center >Z&#61;&quot;BL&quot;<img src="/GMTmemo/assets/grd/zbl.gif" alt="Z&#61;&quot;BL&quot;" /><td align=center >Z&#61;&quot;BR&quot;<img src="/GMTmemo/assets/grd/zbr.gif" alt="Z&#61;&quot;BR&quot;" /><tr><td align=center >Z&#61;&quot;LT&quot;<img src="/GMTmemo/assets/grd/zlt.gif" alt="Z&#61;&quot;LT&quot;" /><td align=center >Z&#61;&quot;LB&quot;<img src="/GMTmemo/assets/grd/zlb.gif" alt="Z&#61;&quot;LB&quot;" /><tr><td align=center >Z&#61;&quot;RT&quot;<img src="/GMTmemo/assets/grd/zrt.gif" alt="Z&#61;&quot;RT&quot;" /><td align=center >Z&#61;&quot;RB&quot;<img src="/GMTmemo/assets/grd/zrb.gif" alt="Z&#61;&quot;RB&quot;" /></table> <div class=page-foot > <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Naoki Maeda. Last modified: February 19, 2025. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> <script src="/GMTmemo/libs/pure/ui.min.js"></script> <script src="/GMTmemo/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script>