<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/GMTmemo/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/GMTmemo/css/franklin.css"> <link rel=stylesheet  href="/GMTmemo/css/pure.css"> <link rel=stylesheet  href="/GMTmemo/css/side-menu.css"> <style> .franklin-content{padding-left:10%;} @media (min-width: 940px) { .franklin-content {width: 640px; margin-left: 0px; padding-left: 80px;} .header {width: 700px;} } </style> <link rel=icon  href="/GMTmemo/assets/favicon.png"> <title>散布図</title> <div id=layout > <a href="#menu" id=menuLink  class=menu-link ><span></span></a> <div id=menu > <div class=pure-menu > <a class=pure-menu-heading  href="#">GMT</a> <ul class=pure-menu-list > <li class="pure-menu-item "><a href="/GMTmemo/" class=pure-menu-link >Home</a> <li class="pure-menu-item pure-menu-selected"><a href="/GMTmemo/menu1/" class=pure-menu-link >散布図</a> <li class="pure-menu-item "><a href="/GMTmemo/menu2/" class=pure-menu-link >軸</a> <li class="pure-menu-item "><a href="/GMTmemo/griddata/" class=pure-menu-link >グリッドデータ</a> <li class="pure-menu-item "><a href="/GMTmemo/menu3/" class=pure-menu-link >Tags</a> </ul> </div> </div> <div id=main > <div class=header > <h1>散布図</h1> <h2>GMT.jl 使用メモ</h2> </div> <div class=franklin-content > <div class=franklin-toc ><ol><li><a href="#とりあえず実行">とりあえず実行</a><li><a href="#軸の設定">軸の設定</a><li><a href="#symbol">symbol</a><ol><li><a href="#星印単色">星印：単色</a><li><a href="#星印カラーパレット">星印：カラーパレット</a><li><a href="#長方形">長方形</a><li><a href="#星印gmtオプションで">星印：GMTオプションで</a></ol><li><a href="#gmtbegin_と_gmtend">gmtbegin と gmtend</a></ol></div> <h1 id="とりあえず実行"><a href="#とりあえず実行" class=header-anchor >とりあえず実行</a></h1> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Random
<span class=hljs-keyword >using</span> GMT
Random.seed!(<span class=hljs-number >20250211</span>) <span class=hljs-comment ># 乱数の種を日付にしている</span>
n = <span class=hljs-number >100</span>
x = randn(n)
y = randn(n)

flfig = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;scatter1&quot;</span>)
scatter(x, y, savefig=flfig)</code></pre> <img src="/GMTmemo/assets/menu1/output/scatter1.png" alt=""> <p>この図では，ほぼオプションを指定していない．</p> <p>なお，ここで使用している <code>@OUTPUT</code> は <code>Franklin.jl</code> で設定している出力フォルダを表しているので， 通常のスクリプトには，不要である．</p> <h1 id="軸の設定"><a href="#軸の設定" class=header-anchor >軸の設定</a></h1> <p>前の例では，図のファイルを <code>savefig</code> というオプションで指定しているが， 個人的な好みで，<code>gmtbegin</code> と <code>gmtend</code> を使用し，保存するファイル名を <code>gmtbegin</code>の中で設定している．</p> <p>ここでは，<code>basemap</code> により軸を設定し，そのスケーリングの中で，散布図を作成する．</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Random
<span class=hljs-keyword >using</span> GMT
Random.seed!(<span class=hljs-number >20250211</span>) <span class=hljs-comment ># 乱数の種を日付にしている</span>
n = <span class=hljs-number >100</span>
x = randn(n)
y = randn(n)

flfig = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;scatter2&quot;</span>)
gmtbegin(flfig, fmt=<span class=hljs-string >&quot;png&quot;</span>)
    basemap(region=(-<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>, -<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>), 
        figscale=(<span class=hljs-number >1.0</span>, <span class=hljs-number >1.0</span>), 
        proj=:linear, 
        frame=(axes=:WSne), 
        xaxis=(annot=:auto, ticks=:auto, grid=:auto), 
        yaxis=(annot=:auto, ticks=:auto, grid=:auto), 
        xlabel=<span class=hljs-string >&quot;x&quot;</span>, ylabel=<span class=hljs-string >&quot;y&quot;</span>)
    scatter(x, y)
gmtend()</code></pre> <img src="/GMTmemo/assets/menu1/output/scatter2.png" alt=""> <p>図の大きさを指定したいときは，<code>figscale</code> の代わりに <code>figsize&#61;&#40;7.0, 7.0&#41;</code> と指定すれば良い．</p> <p>ここでは，<code>GMT.jl</code> 風のオプションで書いているが，<code>GMT</code> のオプション形式も使うことができる．</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Random
<span class=hljs-keyword >using</span> GMT
Random.seed!(<span class=hljs-number >20250211</span>) <span class=hljs-comment ># 乱数の種を日付にしている</span>
n = <span class=hljs-number >100</span>
x = randn(n)
y = randn(n)

flfig = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;scatter3&quot;</span>)
gmtbegin(flfig, fmt=<span class=hljs-string >&quot;png&quot;</span>)
    basemap(R=<span class=hljs-string >&quot;-3.5/3.5/-3.5/3.5&quot;</span>, 
        J=<span class=hljs-string >&quot;x1c/1c&quot;</span>, 
        B=<span class=hljs-string >&quot;afg WSne&quot;</span>,
        xlabel=<span class=hljs-string >&quot;x&quot;</span>, ylabel=<span class=hljs-string >&quot;y&quot;</span>
        )
    scatter(x, y)
gmtend()</code></pre> <img src="/GMTmemo/assets/menu1/output/scatter3.png" alt=""> <p>ただし，<code>xlabel&#61;&quot;x&quot;, ylabel&#61;&quot;y&quot;</code> の部分は今風である． まだ，慣れていないが，今風のオプションのほうが意味を想像しやすくなっている．</p> <h1 id=symbol ><a href="#symbol" class=header-anchor >symbol</a></h1> <p>上の例では，symbolの種類，大きさ，ペンの太さ，色等を指定していない． symobolの種類の例は，<a href="https://www.generic-mapping-tools.org/GMTjl_doc/examples/plotting_functions/040_scatter/index.html">Basic geometric symbols</a> や <a href="https://www.generic-mapping-tools.org/GMTjl_doc/documentation/common_features/symbols/index.html">Symbols</a> に記載がある．</p> <p>また，scatterのオプションを指定した例としては，<a href="https://www.generic-mapping-tools.org/GMTjl_doc/examples/plotting_functions/040_scatter/index.html">Scatters</a> をみると，意味がわかりやすい．</p> <h2 id="星印単色"><a href="#星印単色" class=header-anchor >星印：単色</a></h2> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> GMT
<span class=hljs-keyword >using</span> Random
n=<span class=hljs-number >100</span>
Random.seed!(<span class=hljs-number >20250214</span>)
x = randn(n)
y = randn(n)
size  =rand(n)*<span class=hljs-number >0.5</span> 
flfig = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;scatter4&quot;</span>)
gmtbegin(flfig, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(-<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>, -<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>), 
    figscale=(<span class=hljs-number >1.0</span>, <span class=hljs-number >1.0</span>), 
    proj=:linear, 
    frame=(axes=:WSne), 
    xaxis=(annot=:auto, ticks=:auto, grid=:auto), 
    yaxis=(annot=:auto, ticks=:auto, grid=:auto), 
    xlabel=<span class=hljs-string >&quot;x&quot;</span>, ylabel=<span class=hljs-string >&quot;y&quot;</span>)
scatter(x, y, 
   marker=:*,               <span class=hljs-comment ># マーカーの形状を星印に</span>
   markerline =(<span class=hljs-number >0.3</span>, :red), <span class=hljs-comment ># markerline を赤色で太さ0.3pに</span>
   markersize=size,         <span class=hljs-comment ># markersize でマーカーサイズを指定</span>
   color=:magenta,          <span class=hljs-comment ># color でマーカーの色を指定</span>
   alpha=<span class=hljs-number >50</span>                 <span class=hljs-comment ># alpha で透明度を指定</span>
)
gmtend()</code></pre> <img src="/GMTmemo/assets/menu1/output/scatter4.png" alt=""> <h2 id="星印カラーパレット"><a href="#星印カラーパレット" class=header-anchor >星印：カラーパレット</a></h2> <p>値により，色を塗り分けることができる． 上の例では，<code>color&#61;:magenta</code>のように色名で指定しているので，同じ色になっているが， カラーパレット名を指定し，<code>zcolor</code>を指定すると，値に応じた色の塗り分けができる.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> GMT
<span class=hljs-keyword >using</span> Random
n=<span class=hljs-number >100</span>
Random.seed!(<span class=hljs-number >20250214</span>)
x = randn(n)
y = randn(n)
size  = rand(n)*<span class=hljs-number >0.5</span>
zcolor = rand(n)

flfig = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;scatter5&quot;</span>)
gmtbegin(flfig, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(-<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>, -<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>), 
    figscale=(<span class=hljs-number >1.0</span>, <span class=hljs-number >1.0</span>), 
    proj=:linear, 
    frame=(axes=:WSne), 
    xaxis=(annot=:auto, ticks=:auto, grid=:auto), 
    yaxis=(annot=:auto, ticks=:auto, grid=:auto), 
    xlabel=<span class=hljs-string >&quot;x&quot;</span>, ylabel=<span class=hljs-string >&quot;y&quot;</span>)
scatter(x, y, 
   marker=:*,               <span class=hljs-comment ># マーカーの形状を星印に</span>
   markerline =(<span class=hljs-number >0.3</span>, :red), <span class=hljs-comment ># markerline を赤色で太さ0.3pに</span>
   markersize=size,         <span class=hljs-comment ># markersize でマーカーサイズを指定</span>
   color=:rainbow,          <span class=hljs-comment ># color でカラーパレットを指定</span>
   zcolor=zcolor,            <span class=hljs-comment ># 塗り分けるための値を指定</span>
   alpha=<span class=hljs-number >50</span>                 <span class=hljs-comment ># alpha で透明度を指定</span>
)
gmtend()</code></pre> <img src="/GMTmemo/assets/menu1/output/scatter5.png" alt=""> <ul> <li><p>大きさが変わっているのがなぜかわからず</p> </ul> <h2 id="長方形"><a href="#長方形" class=header-anchor >長方形</a></h2> <p>長方形についても書くことはできるが，向きや大きさを描くためには， GMTのオプションである必要があるようだ．</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> GMT
<span class=hljs-keyword >using</span> Random
n=<span class=hljs-number >100</span>
Random.seed!(<span class=hljs-number >20250214</span>)
x = randn(n)
y = randn(n)
azimuth = <span class=hljs-number >360.0</span>*rand(n)
size  =rand(n)*<span class=hljs-number >0.5</span> .+ <span class=hljs-number >0.15</span>
size2 =size./<span class=hljs-number >2.0</span>
color = rand(n)
C = makecpt(C=<span class=hljs-string >&quot;rainbow&quot;</span>, T=(<span class=hljs-number >0</span>,<span class=hljs-number >1</span>,<span class=hljs-number >0.1</span>), continuous=<span class=hljs-literal >true</span>)
 
xy=hcat(x, y, color, azimuth, size, size2) 

flfig = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;scatter6&quot;</span>)
gmtbegin(flfig, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(-<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>, -<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>), 
    figscale=(<span class=hljs-number >1.0</span>, <span class=hljs-number >1.0</span>), 
    proj=:linear, 
    frame=(axes=:WSne), 
    xaxis=(annot=:auto, ticks=:auto, grid=:auto), 
    yaxis=(annot=:auto, ticks=:auto, grid=:auto), 
    xlabel=<span class=hljs-string >&quot;x&quot;</span>, ylabel=<span class=hljs-string >&quot;y&quot;</span>)
scatter(xy, 
   S=<span class=hljs-string >&quot;J&quot;</span>,                   <span class=hljs-comment ># マーカーの形状を長方形に．GMTのオプション</span>
   markerline =(<span class=hljs-number >0.3</span>, :red), <span class=hljs-comment ># markerline を赤色で太さ0.3pに</span>
   color=C,                 <span class=hljs-comment ># color でマーカーの色を指定．データの3列目．</span>
   alpha=<span class=hljs-number >25</span>                 <span class=hljs-comment ># alpha で透明度を指定</span>
)
colorbar()
gmtend()</code></pre> <img src="/GMTmemo/assets/menu1/output/scatter6.png" alt=""> <p>なかなか難敵． GMTのオプションじゃないと動かないケースがある． もともと，&quot;J&quot;のシンボルは <code>GMT.jl</code> のマニュアルにないので，渡し方を試さないといけない．</p> <h2 id="星印gmtオプションで"><a href="#星印gmtオプションで" class=header-anchor >星印：GMTオプションで</a></h2> <ul> <li><p>星印をGMTオプションで描いてみる．</p> <li><p>色は3番めの列（zのイメージ），大きさは4番めの列となる．</p> <li><p>カラーパレットを使う．</p> </ul> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> GMT
<span class=hljs-keyword >using</span> Random
n=<span class=hljs-number >100</span>
Random.seed!(<span class=hljs-number >20250214</span>)
x = randn(n)
y = randn(n)
size  = rand(n)*<span class=hljs-number >0.5</span>
z = rand(n)

C = makecpt(C=<span class=hljs-string >&quot;rainbow&quot;</span>, T=(<span class=hljs-number >0</span>,<span class=hljs-number >1</span>,<span class=hljs-number >0.1</span>), continuous=<span class=hljs-literal >true</span>)
xyzs = hcat(x, y, z, size)
flfig = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;scatter7&quot;</span>)
gmtbegin(flfig, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(-<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>, -<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>), 
    figscale=(<span class=hljs-number >1.0</span>, <span class=hljs-number >1.0</span>), 
    proj=:linear, 
    frame=(axes=:WSne), 
    xaxis=(annot=:auto, ticks=:auto, grid=:auto), 
    yaxis=(annot=:auto, ticks=:auto, grid=:auto), 
    xlabel=<span class=hljs-string >&quot;x&quot;</span>, ylabel=<span class=hljs-string >&quot;y&quot;</span>)
scatter(xyzs, 
   S=<span class=hljs-string >&quot;a&quot;</span>,               <span class=hljs-comment ># マーカーの形状を星印に</span>
   markerline =(<span class=hljs-number >0.3</span>, :red), <span class=hljs-comment ># markerline を赤色で太さ0.3pに</span>
<span class=hljs-comment >#    markersize=size,       # データの中で定義しているので，不要</span>
   color=C,          <span class=hljs-comment ># color でカラーパレットを指定</span>
<span class=hljs-comment >#    zcolor=zcolor,         # データの中で定義しているので，不要</span>
   alpha=<span class=hljs-number >50</span>                 <span class=hljs-comment ># alpha で透明度を指定</span>
)
gmtend()</code></pre> <img src="/GMTmemo/assets/menu1/output/scatter7.png" alt=""> <ul> <li><p>単色で</p> </ul> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> GMT
<span class=hljs-keyword >using</span> Random
n=<span class=hljs-number >100</span>
Random.seed!(<span class=hljs-number >20250214</span>)
x = randn(n)
y = randn(n)
size  = rand(n)*<span class=hljs-number >0.5</span>
z = rand(n)

xyzs = hcat(x, y, z, size)
flfig = joinpath(<span class=hljs-meta >@OUTPUT</span>, <span class=hljs-string >&quot;scatter8&quot;</span>)
gmtbegin(flfig, fmt=<span class=hljs-string >&quot;png&quot;</span>)
basemap(region=(-<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>, -<span class=hljs-number >3.5</span>, <span class=hljs-number >3.5</span>), 
    figscale=(<span class=hljs-number >1.0</span>, <span class=hljs-number >1.0</span>), 
    proj=:linear, 
    frame=(axes=:WSne), 
    xaxis=(annot=:auto, ticks=:auto, grid=:auto), 
    yaxis=(annot=:auto, ticks=:auto, grid=:auto), 
    xlabel=<span class=hljs-string >&quot;x&quot;</span>, ylabel=<span class=hljs-string >&quot;y&quot;</span>)
scatter(xyzs, 
   S=<span class=hljs-string >&quot;a&quot;</span>,               <span class=hljs-comment ># マーカーの形状を星印に</span>
   markerline =(<span class=hljs-number >0.3</span>, :red), <span class=hljs-comment ># markerline を赤色で太さ0.3pに</span>
<span class=hljs-comment >#    markersize=size,       # データの中で定義しているので，不要</span>
   color=:magenta,          <span class=hljs-comment ># color でカラーパレットを指定</span>
<span class=hljs-comment >#    zcolor=zcolor,         # データの中で定義しているので，不要</span>
   alpha=<span class=hljs-number >50</span>                 <span class=hljs-comment ># alpha で透明度を指定</span>
)
gmtend()</code></pre> <img src="/GMTmemo/assets/menu1/output/scatter8.png" alt=""> <ul> <li><p>単色の場合でも，3番めの値が必要になる．使ってはいないが．</p> <li><p>大きさがどちらも同じ．</p> <li><p>単色 with GMT.jl 風オプションでは，座標上の大きさになっているのだろうか．</p> </ul> <h1 id="gmtbegin_と_gmtend"><a href="#gmtbegin_と_gmtend" class=header-anchor >gmtbegin と gmtend</a></h1> <p>個人的な好みで，<code>gmtbegin</code> と <code>gmtend</code> を使っているとした． GMT Ver.6になって登場した機能で，modern mode と称している． <code>GMT.jl</code> でも，<code>gmtbegin</code> と <code>gmtend</code> が使えたので，そのまま使っているが， <a href="https://www.generic-mapping-tools.org/GMTjl_doc/documentation/modules/">GMTmodule</a> には，リストアップされていない，ということにこのページの作成時点で気がついた． documentation で検索するといくつか <a href="https://www.generic-mapping-tools.org/GMTjl_doc/search/index.html?q&#61;gmtbegin">使用例</a> がでてくるのみである．</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> GMT 
methods(gmtbegin)
methods(gmtend)</code></pre> <p>で内容を確認すると，</p> <p><strong>gmtbegin</strong> <pre>
# 2 methods for generic function "gmtbegin" from GMT:
 [1] gmtbegin(name::String; fmt, verbose)
     @ ~/.julia/packages/GMT/XAbNJ/src/gmtbegin.jl:12
 [2] gmtbegin(; ...)
     @ ~/.julia/packages/GMT/XAbNJ/src/gmtbegin.jl:12
</pre> </p> <p><strong>gmtend</strong> <pre>
# 2 methods for generic function "gmtend" from GMT:
 [1] gmtend(; ...)
     @ ~/.julia/packages/GMT/XAbNJ/src/gmtbegin.jl:30
 [2] gmtend(arg; show, verbose, reset)
     @ ~/.julia/packages/GMT/XAbNJ/src/gmtbegin.jl:30
</pre> 使い方としては， gmtbegin&#40;&quot;ファイル名&quot;, fmt&#61;&quot;png&quot;&#41; というふうに，出力するファイル名とファイルの種類を指定する． GMTの<a href="https://docs.generic-mapping-tools.org/latest/begin.html">マニュアル</a>に示されたサポートしているフォーマットは，以下の表の通り</p> <table><tr><th align=center >Format<th align=left >Explanation<tr><td align=center >bmp<td align=left >Microsoft Bit Map<tr><td align=center >eps<td align=left >Encapsulated PostScript<tr><td align=center >jpg<td align=left >Joint Photographic Experts Group Format<tr><td align=center >pdf<td align=left >Portable Document Format &#91;Default&#93;<tr><td align=center >png<td align=left >Portable Network Graphics<tr><td align=center >PNG<td align=left >Portable Network Graphics &#40;with transparency layer&#41;<tr><td align=center >ppm<td align=left >Portable Pixel Map<tr><td align=center >ps<td align=left >Plain PostScript<tr><td align=center >tif<td align=left >Tagged Image Format File<tr><td align=center >view<td align=left >Use format set by GMT<em>GRAPHICS</em>FORMAT</table> <p>GMT.jl ですべてを確認しているわけではない． よく使うのは，<strong>png</strong> と <strong>pdf</strong> である．</p> <div class=page-foot > <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Naoki Maeda. Last modified: February 15, 2025. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> <script src="/GMTmemo/libs/pure/ui.min.js"></script> <script src="/GMTmemo/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script>